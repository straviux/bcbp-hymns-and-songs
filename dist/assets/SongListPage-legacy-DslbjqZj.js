System.register(["./index-legacy-BVrP-4jz.js","./HeaderToolBar.vue_vue_type_script_setup_true_lang-legacy-DdKcQ3jx.js","./bcbplogo-legacy-DNPlaw3-.js"],(function(e,l){"use strict";var n,a,t,o,s,i,u,r,c,d,v,y,g,f,_,h,w,p,C,b,k,m,L,H,S,j,x,z,E,F;return{setters:[e=>{n=e.d,a=e.r,t=e.n,o=e.q,s=e.C,i=e.s,u=e.t,r=e.c,c=e.w,d=e.a,v=e.b,y=e.e,g=e.x,f=e.y,_=e.z,h=e.h,w=e.f,p=e.A,C=e.B,b=e.D,k=e.F,m=e.I,L=e.E,H=e.G,S=e.j,j=e.l,x=e.H,z=e.J,E=e.K},e=>{F=e._},null],execute:function(){const l={style:{"font-size":"12px",color:"#a8a8a8"}},T={key:0,class:"song-artist"},q={key:1,class:"no-result"},B={key:0,class:"no-result-content"},I=w("h1",null,"No Result Found",-1),R=w("span",null,"We couldn't find any title, lyrics or artist matching your search",-1);e("default",n({__name:"SongListPage",setup(e){const n=a(!1),A=a(x),D=a(o);t((async()=>{D.value=new o(s);const e=await D.value.checkConnectionsConsistency(),l=(await D.value.isConnection("db_songlist",!1)).result;var n,a;e.result&&l?A.value=await(null===(n=D.value)||void 0===n?void 0:n.retrieveConnection("db_songlist",!1)):A.value=await(null===(a=D.value)||void 0===a?void 0:a.createConnection("db_songlist",!1,"no-encryption",1,!1)),G()})),i((async()=>{var e;await(null===(e=D.value)||void 0===e?void 0:e.closeConnection("db_songlist",!1))}));const G=async()=>{var e,l,n;await(null===(e=A.value)||void 0===e?void 0:e.open());const a=await(null===(l=A.value)||void 0===l?void 0:l.query("SELECT * FROM songs"));await(null===(n=A.value)||void 0===n?void 0:n.close()),J.value=null==a?void 0:a.values},J=a(),K=a(""),M=e=>{K.value=e.searchQuery},N=u((()=>{return e=K.value.toLocaleLowerCase(),null===(l=J.value)||void 0===l?void 0:l.filter((l=>{var n;return l.title.toLowerCase().includes(e)||l.lyrics.toLowerCase().includes(e)||(null===(n=l.artist)||void 0===n?void 0:n.toLowerCase().includes(e))})).sort(((e,l)=>e.title.localeCompare(l.title)));var e,l}));return(e,a)=>(v(),r(d(j),null,{default:c((()=>[y(F,{onEmitSearch:M,isHeaderHidden:n.value},null,8,["isHeaderHidden"]),y(d(S),{fullscreen:!0,onIonScroll:a[0]||(a[0]=e=>{e.detail.scrollTop>30?n.value=!0:n.value=!1}),"scroll-events":!0},{default:c((()=>{var e;return[(null===(e=N.value)||void 0===e?void 0:e.length)>0?(v(),r(d(g),{key:0},{default:c((()=>[y(d(f),null,{default:c((()=>[y(d(_),{class:"list-header"},{default:c((()=>[h("Songs "),w("span",l,"["+p(N.value.length)+"]",1)])),_:1})])),_:1}),(v(!0),C(k,null,b(N.value,((e,l)=>(v(),r(d(z),{key:"song_"+l,href:"/song/"+e.id+"/lyrics"},{default:c((()=>[y(d(_),{class:"fade-in-left-animation song-label"},{default:c((()=>[w("p",null,p(e.title),1),e.artist?(v(),C("span",T,p(e.artist),1)):H("",!0)])),_:2},1024),e.chords?(v(),r(d(E),{key:0,slot:"end",size:"small",fill:"outline",color:"warning",href:"/song/"+e.id+"/chords"},{default:c((()=>[h("chords ")])),_:2},1032,["href"])):H("",!0)])),_:2},1032,["href"])))),128))])),_:1})):(v(),C("div",q,[K.value?(v(),C("div",B,[y(d(m),{icon:d(L),size:"large"},null,8,["icon"]),I,R])):H("",!0)]))]})),_:1})])),_:1}))}}))}}}));
