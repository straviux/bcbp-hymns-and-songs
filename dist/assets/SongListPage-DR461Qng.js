import{d as S,r as u,n as b,q as m,C as B,s as H,t as E,c as d,w as r,a as n,b as o,e as f,x as Q,y as v,z as V,F as x,I as D,A as N,B as C,j as F,l as q,f as h,D as z,E as O,G as T,H as p,J as P,h as R}from"./index-CRfOI_3F.js";import{_ as W}from"./HeaderToolBar.vue_vue_type_script_setup_true_lang-C6IMImYM.js";import"./bcbplogo-DPdg0dlV.js";const j={key:0,class:"song-artist"},A={key:1,class:"no-result"},G={key:0,class:"no-result-content"},J=h("h1",null,"No Result Found",-1),M=h("span",null,"We couldn't find any title, lyrics or artist matching your search",-1),Y=S({__name:"SongListPage",setup($){const _=u(!1),L=e=>{e.detail.scrollTop>30?_.value=!0:_.value=!1},c=u(z),l=u(m);b(async()=>{var t,s;l.value=new m(B);const e=await l.value.checkConnectionsConsistency(),a=(await l.value.isConnection("db_songlist",!1)).result;e.result&&a?c.value=await((t=l.value)==null?void 0:t.retrieveConnection("db_songlist",!1)):c.value=await((s=l.value)==null?void 0:s.createConnection("db_songlist",!1,"no-encryption",1,!1)),g()}),H(async()=>{var e;await((e=l.value)==null?void 0:e.closeConnection("db_songlist",!1))});const g=async()=>{var a,t,s;await((a=c.value)==null?void 0:a.open());const e=await((t=c.value)==null?void 0:t.query("SELECT * FROM songs"));await((s=c.value)==null?void 0:s.close()),y.value=e==null?void 0:e.values},y=u(),i=u(""),I=e=>{i.value=e.searchQuery},w=E(()=>{var e;return(e=y.value)==null?void 0:e.filter(a=>{var t;return a.title.toLowerCase().includes(i.value.toLowerCase())||a.lyrics.toLowerCase().includes(i.value.toLowerCase())||a.category.toLowerCase().includes(i.value.toLowerCase())||((t=a.artist)==null?void 0:t.toLowerCase().includes(i.value.toLowerCase()))}).sort((a,t)=>a.title.localeCompare(t.title))});return(e,a)=>(o(),d(n(q),null,{default:r(()=>[f(W,{onEmitSearch:I,isHeaderHidden:_.value},null,8,["isHeaderHidden"]),f(n(F),{fullscreen:!0,onIonScroll:a[0]||(a[0]=t=>L(t)),"scroll-events":!0},{default:r(()=>{var t;return[((t=w.value)==null?void 0:t.length)>0?(o(),d(n(Q),{key:0},{default:r(()=>[(o(!0),v(x,null,V(w.value,(s,k)=>(o(),d(n(O),{key:"song_"+k,href:"/song/"+s.id+"/lyrics"},{default:r(()=>[f(n(T),{class:"fade-in-left-animation song-label"},{default:r(()=>[h("p",null,p(s.title),1),s.artist?(o(),v("span",j,p(s.artist),1)):C("",!0)]),_:2},1024),s.chords?(o(),d(n(P),{key:0,slot:"end",size:"small",fill:"outline",color:"warning",href:"/song/"+s.id+"/chords"},{default:r(()=>[R("chords ")]),_:2},1032,["href"])):C("",!0)]),_:2},1032,["href"]))),128))]),_:1})):(o(),v("div",A,[i.value?(o(),v("div",G,[f(n(D),{icon:n(N),size:"large"},null,8,["icon"]),J,M])):C("",!0)]))]}),_:1})]),_:1}))}});export{Y as default};
