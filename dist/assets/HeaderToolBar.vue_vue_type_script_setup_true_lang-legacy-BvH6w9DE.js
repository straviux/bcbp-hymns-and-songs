System.register(["./index-legacy-BQS7YiQX.js","./bcbplogo-legacy-DNPlaw3-.js"],(function(t,e){"use strict";var a,l,s,n,o,i,c,r,d,u,p,g,m,v,f,y,h,b,x,_,w,C,k,S,z,H,L,M,B,E,j,T,q,A;return{setters:[t=>{a=t.d,l=t.b,s=t.c,n=t.w,o=t.e,i=t.a,c=t.L,r=t.I,d=t.M,u=t.N,p=t.h,g=t.O,m=t.J,v=t.P,f=t.j,y=t.f,h=t.Q,b=t.R,x=t.r,_=t.E,w=t.T,C=t.U,k=t.x,S=t.D,z=t.q,H=t.C,L=t.V,M=t.W,B=t.X,E=t.Y,j=t.Z,T=t.$,q=t.a0},t=>{A=t._}],execute:function(){var e=document.createElement("style");e.textContent="ion-modal.settings-modal::part(content){--height: 80%;--border-radius: 12px;--width: 320px}.settings-content{width:100%;color:#777}.settings-content ion-list{width:100%}ion-modal.update-library-modal::part(content){--height: 55px;--border-radius: 3px;--width: 300px}.update-library-content{display:flex;align-items:center;justify-content:center;color:#777}ion-modal.about-modal::part(content){--height: 420px;--border-radius: 12px;--width: 320px}.about-content{width:100%;color:#777}ion-toast.custom-toast{--background: #6a679e;--width: 300px;--box-shadow: 3px 3px 10px 0 rgba(0, 0, 0, .6s);--color: #f1f1f1;font-size:14px}\n",document.head.appendChild(e);const U=y("div",{class:"ion-padding"},[y("div",{class:"settings-content"},"Coming soon..")],-1),D=a({__name:"SettingsModal",setup(t){const e=()=>h.dismiss(null,"cancel");return(t,a)=>(l(),s(i(f),{class:"settings-modal"},{default:n((()=>[o(i(c),null,{default:n((()=>[o(i(r),{icon:i(d),style:{"margin-left":"10px","margin-right":"-10px","font-size":"22px"},slot:"start"},null,8,["icon"]),o(i(u),null,{default:n((()=>[p("Settings")])),_:1}),o(i(g),{slot:"end"},{default:n((()=>[o(i(m),{color:"light",onClick:e},{default:n((()=>[o(i(r),{icon:i(v)},null,8,["icon"])])),_:1})])),_:1})])),_:1}),U])),_:1}))}}),I=y("div",{class:"ion-padding"},[y("div",{class:"update-library-content"},[y("div",{class:"indicator"},[y("div",null,"Updating library...")])])],-1),N=a({__name:"UpdateLibraryModal",setup:t=>(t,e)=>(l(),s(i(f),null,{default:n((()=>[I,o(i(b),{type:"indeterminate",color:"success"})])),_:1}))}),O=y("div",{class:"ion-padding",style:{color:"#555",display:"flex","flex-direction":"column",gap:"8px"}},[y("img",{src:A,alt:"bcbp logo",height:"160",width:"160",style:{margin:"auto"}}),y("div",{style:{margin:"auto"}},[y("h4",null,"BCBP Hyms & Songs"),y("div",{style:{"font-size":"12px",color:"#777","margin-top":"10px"}},[y("span",null,"Version 1.1")]),y("div",{style:{"font-size":"12px",color:"#777","margin-top":"10px"}},[p(" Last library update: "),y("span",null,"04/08/2024")])])],-1),P=a({__name:"AboutModal",setup(t){const e=()=>h.dismiss(null,"cancel");return(t,a)=>(l(),s(i(f),{class:"about-modal"},{default:n((()=>[o(i(c),null,{default:n((()=>[o(i(u),null,{default:n((()=>[p("About")])),_:1}),o(i(g),{slot:"end"},{default:n((()=>[o(i(m),{color:"light",onClick:e},{default:n((()=>[o(i(r),{icon:i(v)},null,8,["icon"])])),_:1})])),_:1})])),_:1}),O])),_:1}))}}),R=a({__name:"MenuList",setup(t){const e=x(S),a=x(z),c=async t=>{const l={component:P,cssClass:"about-modal"},s={component:N,cssClass:"update-library-modal"},n={component:D,cssClass:"settings-modal"},o=await h.create(l),i=await h.create(s),c=await h.create(n);if("settings"==t&&c.present(),"update"==t){i.present().then((async()=>{a.value=new z(H);const l=await a.value.checkConnectionsConsistency(),s=(await a.value.isConnection("db_songlist",!1)).result;var n,o;l.result&&s?e.value=await(null===(n=a.value)||void 0===n?void 0:n.retrieveConnection("db_songlist",!1)):e.value=await(null===(o=a.value)||void 0===o?void 0:o.createConnection("db_songlist",!1,"no-encryption",1,!1)),t()}));const t=async()=>{var t,l,s,n;await(null===(t=e.value)||void 0===t?void 0:t.open());const o=await(null===(l=e.value)||void 0===l?void 0:l.query("SELECT * FROM songs"));await(null===(s=e.value)||void 0===s?void 0:s.close()),await(null===(n=a.value)||void 0===n?void 0:n.closeConnection("db_songlist",!1));const c=await L.get("/api/songs"),r=c.data.data.length;let d="Library is already up to date";r!==o.values.length?(c.data.data.forEach((async t=>{try{var a,l;await(null===(a=e.value)||void 0===a?void 0:a.open()),await(null===(l=e.value)||void 0===l?void 0:l.query("INSERT INTO songs (id,title,lyrics,chords,artist,category) values (?,?,?,?,?,?)",[t.id,t.title,t.lyrics,t.chords,t.artist,t.category])),d="Library has been updated"}catch(s){d="Somethin went wrong, please try again"}})),i.dismiss()):i.dismiss();const u=await M.create({message:d,duration:1600,cssClass:"custom-toast",position:"bottom"});await u.present()}}"about"==t&&o.present()};return(t,e)=>(l(),s(i(f),null,{default:n((()=>[o(i(k),{lines:"full"},{default:n((()=>[o(i(_),{button:"",onClick:e[0]||(e[0]=t=>c("settings"))},{default:n((()=>[o(i(m),{fill:"clear",expand:"block",style:{color:"#777","text-transform":"capitalize","font-size":"14px",padding:"10px 0"}},{default:n((()=>[o(i(r),{slot:"start",icon:i(d)},null,8,["icon"]),p(" Settings ")])),_:1})])),_:1}),o(i(_),{button:"",onClick:e[1]||(e[1]=t=>c("update"))},{default:n((()=>[o(i(m),{fill:"clear",expand:"block",style:{color:"#777","text-transform":"capitalize","font-size":"14px",padding:"10px 0"}},{default:n((()=>[o(i(r),{slot:"start",icon:i(w)},null,8,["icon"]),p(" Update Library ")])),_:1})])),_:1}),o(i(_),{lines:"none",button:"",onClick:e[2]||(e[2]=t=>c("about"))},{default:n((()=>[o(i(m),{fill:"clear",expand:"block",style:{color:"#777","text-transform":"capitalize","font-size":"14px",padding:"10px 0"}},{default:n((()=>[o(i(r),{slot:"start",icon:i(C)},null,8,["icon"]),p(" About ")])),_:1})])),_:1})])),_:1})])),_:1}))}}),Z=y("img",{src:"data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20308.19%20305.67'%3e%3cdefs%3e%3cstyle%3e.cls-1,.cls-2{fill:%2302208b;}.cls-2{fill-rule:evenodd;}%3c/style%3e%3c/defs%3e%3ctitle%3ebcbp-seeklogo%3c/title%3e%3cg%20id='center_line_with_3_circles'%20data-name='center%20line%20with%203%20circles'%3e%3ccircle%20class='cls-1'%20cx='101.06'%20cy='84'%20r='23.17'/%3e%3ccircle%20class='cls-1'%20cx='207.06'%20cy='84'%20r='23.17'/%3e%3ccircle%20class='cls-1'%20cx='154.06'%20cy='26.5'%20r='26.5'/%3e%3crect%20class='cls-1'%20x='127.56'%20y='60.83'%20width='53'%20height='244.83'/%3e%3c/g%3e%3cg%20id='inner_component_cutouts'%20data-name='inner%20component%20cutouts'%3e%3cpath%20class='cls-1'%20d='M332.7,164.58a33.08,33.08,0,0,1,0,46.34h77.43a159.88,159.88,0,0,0-22.19-46.34Z'%20transform='translate(-101.94%20-103.75)'/%3e%3cpath%20class='cls-1'%20d='M169.58,187.5a33.07,33.07,0,0,1,9.47-23.17H124.23a160.26,160.26,0,0,0-22.29,46.34h77.11A33.07,33.07,0,0,1,169.58,187.5Z'%20transform='translate(-101.94%20-103.75)'/%3e%3cpolygon%20class='cls-2'%20points='117.81%20114.33%2075.93%20114.33%2050.43%20158.83%2092.31%20158.83%20117.81%20114.33'/%3e%3cpolygon%20class='cls-2'%20points='117.81%20203.33%2075.93%20203.33%2050.43%20158.83%2092.31%20158.83%20117.81%20203.33'/%3e%3cpolygon%20class='cls-2'%20points='189.35%20114.33%20231.22%20114.33%20256.72%20158.83%20214.85%20158.83%20189.35%20114.33'/%3e%3cpolygon%20class='cls-2'%20points='189.35%20203.33%20231.22%20203.33%20256.72%20158.83%20214.85%20158.83%20189.35%20203.33'/%3e%3c/g%3e%3c/svg%3e",height:"40",slot:"start",style:{"margin-left":"14px","margin-right":"-10px"}},null,-1);t("_",a({__name:"HeaderToolBar",props:{isHeaderHidden:{type:Boolean,default:!1}},emits:["emitSearch"],setup(t,{emit:e}){const a=e,d=()=>{var t;const e=null===(t=document.querySelector("#searchbar"))||void 0===t?void 0:t.value;a("emitSearch",{searchQuery:e})},v=x(!1),f=x();return(e,a)=>(l(),s(i(q),{class:"ion-no-border"},{default:n((()=>[o(i(c),{class:j(["header-transition",{"ion-header-hidden":t.isHeaderHidden}])},{default:n((()=>[Z,o(i(u),null,{default:n((()=>[p("BCBP Hymns & Songs")])),_:1}),o(i(g),{slot:"primary"},{default:n((()=>[o(i(m),{onClick:a[0]||(a[0]=t=>{return e=t,f.value=e,void(v.value=!0);var e})},{default:n((()=>[o(i(r),{slot:"icon-only",icon:i(B)},null,8,["icon"])])),_:1}),o(i(E),{"is-open":v.value,event:f.value,onDidDismiss:a[1]||(a[1]=t=>v.value=!1)},{default:n((()=>[o(R)])),_:1},8,["is-open","event"])])),_:1})])),_:1},8,["class"]),o(i(c),{class:j(["header-transition",{"search-bar-persist":t.isHeaderHidden}])},{default:n((()=>[o(i(T),{"show-clear-button":"focus",class:"searchbar",id:"searchbar",onKeyup:d})])),_:1},8,["class"])])),_:1}))}}))}}}));
