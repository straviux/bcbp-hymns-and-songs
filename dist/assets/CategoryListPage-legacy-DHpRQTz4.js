System.register(["./HeaderToolBar.vue_vue_type_script_setup_true_lang-legacy-DH7QGJaT.js","./index-legacy-C1FsRSJE.js","./bcbplogo-legacy-DNPlaw3-.js"],(function(e,l){"use strict";var a,n,s,t,o,i,u,r,c,v,d,g,y,f,_,h,w,p,C,k,m,b,j,L,H,E,x,z,S,F;return{setters:[e=>{a=e._},e=>{n=e.d,s=e.r,t=e.t,o=e.n,i=e.q,u=e.C,r=e.s,c=e.c,v=e.w,d=e.a,g=e.b,y=e.e,f=e.B,_=e.F,h=e.D,w=e.I,p=e.E,C=e.G,k=e.j,m=e.l,b=e.f,j=e.H,L=e.x,H=e.y,E=e.z,x=e.h,z=e.A,S=e.J,F=e.K},null],execute:function(){const l={key:0},T={style:{"font-size":"12px",color:"#a8a8a8"}},q={key:0,class:"song-artist"},B={key:1,class:"no-result"},I={key:0,class:"no-result-content"},R=b("h1",null,"No Result Found",-1),A=b("span",null,"We couldn't find any title, lyrics or artist matching your search",-1);e("default",n({__name:"CategoryListPage",setup(e){const n=s(!1),D=s(),G=s(),J=s(""),K=e=>{J.value=e.searchQuery},M=t((()=>{return e=G.value,l=J.value.toLowerCase(),null==e?void 0:e.map((e=>({...e,songs:e.songs.filter((e=>{var a;return e.category.toLowerCase().includes(l)||e.title.toLowerCase().includes(l)||e.lyrics.toLowerCase().includes(l)||(null===(a=e.artist)||void 0===a?void 0:a.toLowerCase().includes(l))})).sort(((e,l)=>e.title.localeCompare(l.title)))})));var e,l})),N=s(j),O=s(i);o((async()=>{O.value=new i(u);const e=await O.value.checkConnectionsConsistency(),l=(await O.value.isConnection("db_songlist",!1)).result;var a,n;e.result&&l?N.value=await(null===(a=O.value)||void 0===a?void 0:a.retrieveConnection("db_songlist",!1)):N.value=await(null===(n=O.value)||void 0===n?void 0:n.createConnection("db_songlist",!1,"no-encryption",1,!1)),P()})),r((async()=>{var e;J.value="",await(null===(e=O.value)||void 0===e?void 0:e.closeConnection("db_songlist",!1))}));const P=async()=>{var e,l,a;await(null===(e=N.value)||void 0===e?void 0:e.open());const n=await(null===(l=N.value)||void 0===l?void 0:l.query("SELECT * FROM songs"));await(null===(a=N.value)||void 0===a?void 0:a.close()),D.value=null==n?void 0:n.values;const s=await fetch("/category.json"),t=await s.json();G.value=t.categories,G.value.forEach((e=>{e.songs=[];for(let l=0;l<D.value.length;l++)D.value[l].category==e.category&&e.songs.push(D.value[l])}))};return(e,s)=>(g(),c(d(m),null,{default:v((()=>[y(a,{onEmitSearch:K,isHeaderHidden:n.value},null,8,["isHeaderHidden"]),y(d(k),{fullscreen:!0,onIonScroll:s[0]||(s[0]=e=>{e.detail.scrollTop>30?n.value=!0:n.value=!1}),"scroll-events":!0},{default:v((()=>{var e;return[(null===(e=M.value)||void 0===e?void 0:e.length)>0?(g(),f("div",l,[(g(!0),f(_,null,h(M.value,((e,l)=>(g(),f("div",{key:"category_"+l},[e.songs.length>0?(g(),c(d(L),{key:0,lines:"inset"},{default:v((()=>[y(d(H),null,{default:v((()=>[y(d(E),{class:"list-header"},{default:v((()=>[x(z(e.name)+" ",1),b("span",T,"["+z(e.songs.length)+"]",1)])),_:2},1024)])),_:2},1024),(g(!0),f(_,null,h(e.songs,((e,l)=>(g(),c(d(S),{key:"song_"+l,href:"/song/"+e.id+"/lyrics"},{default:v((()=>[y(d(E),{class:"fade-in-left-animation song-label"},{default:v((()=>[b("p",null,z(e.title),1),e.artist?(g(),f("span",q,z(e.artist),1)):C("",!0)])),_:2},1024),e.chords?(g(),c(d(F),{key:0,slot:"end",size:"small",fill:"outline",color:"warning",href:"/song/"+e.id+"/chords"},{default:v((()=>[x("chords ")])),_:2},1032,["href"])):C("",!0)])),_:2},1032,["href"])))),128))])),_:2},1024)):C("",!0)])))),128))])):(g(),f("div",B,[J.value?(g(),f("div",I,[y(d(w),{icon:d(p),size:"large"},null,8,["icon"]),R,A])):C("",!0)]))]})),_:1})])),_:1}))}}))}}}));
