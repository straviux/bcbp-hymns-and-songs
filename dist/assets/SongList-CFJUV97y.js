import{d as N,r as _,t as F,n as H,c as h,w as t,a as e,$ as w,b as i,e as a,N as C,a3 as b,P as O,h as m,a4 as T,a5 as D,x as E,B as f,D as P,F as A,I as c,E as $,G as L,j,a6 as G,a7 as S,a8 as J,l as K,J as Q,z as R,f as g,A as k,K as p,a9 as U,aa as W,p as q,m as M,_ as X}from"./index-DSmeTysl.js";const z=u=>(q("data-v-b6f9f88a"),u=u(),M(),u),Y={key:0,class:"song-artist"},Z={key:1,class:"no-result"},ee={key:0,class:"no-result-content"},ae=z(()=>g("h1",null,"No Result Found",-1)),te=z(()=>g("span",null,"We couldn't find any title, lyrics or artist matching your search",-1)),se=N({__name:"SongList",setup(u){const d=_(!1),B=o=>{o.detail.scrollTop>30?d.value=!0:d.value=!1},v=_(),n=_(""),I=F(()=>{var o;return(o=v.value)==null?void 0:o.filter(s=>{var l;return s.title.toLowerCase().includes(n.value.toLowerCase())||s.lyrics.toLowerCase().includes(n.value.toLowerCase())||s.category.toLowerCase().includes(n.value.toLowerCase())||((l=s.artist)==null?void 0:l.toLowerCase().includes(n.value.toLowerCase()))}).sort((s,l)=>s.title.localeCompare(l.title))}),x=async(o,s)=>{if(confirm("Are you sure you want to delete this song?\n"+s)){console.log("Song deleted");try{await w.delete("/api/songs/"+o).then(()=>{y()})}catch(l){return l}}else return},y=async()=>{const o=await w.get("/api/songs");v.value=o.data.data};return H(async()=>{y()}),(o,s)=>(i(),h(e(K),null,{default:t(()=>[a(e(D),{class:"ion-no-border"},{default:t(()=>[a(e(C),{class:b(["header-transition",{"ion-header-hidden":d.value}])},{default:t(()=>[a(e(O),null,{default:t(()=>[m("BCBP Hymns & Songs")]),_:1})]),_:1},8,["class"]),a(e(C),{class:b(["header-transition",{"search-bar-persist":d.value}])},{default:t(()=>[a(e(T),{"show-clear-button":"focus",class:"searchbar",modelValue:n.value,"onUpdate:modelValue":s[0]||(s[0]=l=>n.value=l)},null,8,["modelValue"])]),_:1},8,["class"])]),_:1}),a(e(j),{fullscreen:!0,onIonScroll:s[1]||(s[1]=l=>B(l)),"scroll-events":!0},{default:t(()=>{var l;return[((l=I.value)==null?void 0:l.length)>0?(i(),h(e(E),{key:0,lines:"full"},{default:t(()=>[(i(!0),f(A,null,P(I.value,(r,V)=>(i(),h(e(Q),{key:"song_"+V},{default:t(()=>[a(e(R),{class:"fade-animation song-label"},{default:t(()=>[g("p",null,k(r.title),1),r.artist?(i(),f("span",Y,k(r.artist),1)):L("",!0)]),_:2},1024),a(e(p),{slot:"end",size:"small",color:"dark",fill:"clear",href:"manage/update-song/"+r.id},{default:t(()=>[a(e(c),{icon:e(U),size:"small"},null,8,["icon"]),m(" edit ")]),_:2},1032,["href"]),a(e(p),{slot:"end",size:"small",fill:"clear",color:"warning",href:"manage/update-song-chord/"+r.id},{default:t(()=>[a(e(c),{icon:e(S),size:"small"},null,8,["icon"]),m(" chords ")]),_:2},1032,["href"]),a(e(p),{slot:"end",size:"small",fill:"clear",color:"danger",onClick:le=>x(r.id,r.title)},{default:t(()=>[a(e(c),{icon:e(W),size:"small"},null,8,["icon"])]),_:2},1032,["onClick"])]),_:2},1024))),128))]),_:1})):(i(),f("div",Z,[n.value?(i(),f("div",ee,[a(e(c),{icon:e($),size:"large"},null,8,["icon"]),ae,te])):L("",!0)]))]}),_:1}),a(e(J),{slot:"fixed",vertical:"bottom",horizontal:"end"},{default:t(()=>[a(e(G),{color:"primary",href:"/manage/new-song"},{default:t(()=>[a(e(c),{icon:e(S),style:{color:"white"}},null,8,["icon"])]),_:1})]),_:1})]),_:1}))}}),ne=X(se,[["__scopeId","data-v-b6f9f88a"]]);export{ne as default};
