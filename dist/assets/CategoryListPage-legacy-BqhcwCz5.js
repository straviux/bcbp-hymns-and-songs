System.register(["./HeaderToolBar.vue_vue_type_script_setup_true_lang-legacy-DdKcQ3jx.js","./index-legacy-BVrP-4jz.js","./bcbplogo-legacy-DNPlaw3-.js"],(function(e,l){"use strict";var a,t,o,n,s,i,u,r,c,v,d,g,y,f,_,h,w,p,C,k,m,b,L,j,H,E,z,S,x,F;return{setters:[e=>{a=e._},e=>{t=e.d,o=e.r,n=e.t,s=e.n,i=e.q,u=e.C,r=e.s,c=e.c,v=e.w,d=e.a,g=e.b,y=e.e,f=e.B,_=e.L,h=e.F,w=e.D,p=e.I,C=e.E,k=e.G,m=e.j,b=e.l,L=e.f,j=e.H,H=e.M,E=e.J,z=e.z,S=e.h,x=e.A,F=e.K},null],execute:function(){const l={key:0},T={style:{"font-size":"12px",color:"#a8a8a8"}},q={slot:"content"},B={key:0,class:"song-artist"},I={key:1,class:"no-result"},M={key:0,class:"no-result-content"},R=L("h1",null,"No Result Found",-1),A=L("span",null,"We couldn't find any title, lyrics or artist matching your search",-1);e("default",t({__name:"CategoryListPage",setup(e){const t=o(!1),D=o(),G=o(),J=o(""),K=e=>{J.value=e.searchQuery},N=n((()=>{return e=G.value,l=J.value.toLowerCase(),null==e?void 0:e.map((e=>({...e,songs:e.songs.filter((e=>{var a;return e.category.toLowerCase().includes(l)||e.title.toLowerCase().includes(l)||e.lyrics.toLowerCase().includes(l)||(null===(a=e.artist)||void 0===a?void 0:a.toLowerCase().includes(l))})).sort(((e,l)=>e.title.localeCompare(l.title)))})));var e,l})),O=o(j),P=o(i);s((async()=>{P.value=new i(u);const e=await P.value.checkConnectionsConsistency(),l=(await P.value.isConnection("db_songlist",!1)).result;var a,t;e.result&&l?O.value=await(null===(a=P.value)||void 0===a?void 0:a.retrieveConnection("db_songlist",!1)):O.value=await(null===(t=P.value)||void 0===t?void 0:t.createConnection("db_songlist",!1,"no-encryption",1,!1)),Q()})),r((async()=>{var e;J.value="",await(null===(e=P.value)||void 0===e?void 0:e.closeConnection("db_songlist",!1))}));const Q=async()=>{var e,l,a;await(null===(e=O.value)||void 0===e?void 0:e.open());const t=await(null===(l=O.value)||void 0===l?void 0:l.query("SELECT * FROM songs"));await(null===(a=O.value)||void 0===a?void 0:a.close()),D.value=null==t?void 0:t.values;const o=await fetch("/category.json"),n=await o.json();G.value=n.categories,G.value.forEach((e=>{e.songs=[];for(let l=0;l<D.value.length;l++)D.value[l].category==e.category&&e.songs.push(D.value[l])}))};return(e,o)=>(g(),c(d(b),null,{default:v((()=>[y(a,{onEmitSearch:K,isHeaderHidden:t.value},null,8,["isHeaderHidden"]),y(d(m),{fullscreen:!0,onIonScroll:o[0]||(o[0]=e=>{e.detail.scrollTop>30?t.value=!0:t.value=!1}),"scroll-events":!0},{default:v((()=>{var e;return[(null===(e=N.value)||void 0===e?void 0:e.length)>0?(g(),f("div",l,[y(d(_),null,{default:v((()=>[(g(!0),f(h,null,w(N.value,((e,l)=>(g(),c(d(H),{value:"category_"+l,key:"category_"+l},{default:v((()=>[y(d(E),{slot:"header",color:"light"},{default:v((()=>[y(d(z),{class:"list-header",style:{color:"#888"}},{default:v((()=>[S(x(e.name),1),L("span",T," ["+x(e.songs.length)+"]",1)])),_:2},1024)])),_:2},1024),L("div",q,[(g(!0),f(h,null,w(e.songs,((e,l)=>(g(),c(d(E),{key:"song_"+l,href:"/song/"+e.id+"/lyrics"},{default:v((()=>[y(d(z),{class:"fade-in-left-animation song-label"},{default:v((()=>[L("p",null,x(e.title),1),e.artist?(g(),f("span",B,x(e.artist),1)):k("",!0)])),_:2},1024),e.chords?(g(),c(d(F),{key:0,slot:"end",size:"small",fill:"outline",color:"warning",href:"/song/"+e.id+"/chords"},{default:v((()=>[S("chords ")])),_:2},1032,["href"])):k("",!0)])),_:2},1032,["href"])))),128))])])),_:2},1032,["value"])))),128))])),_:1})])):(g(),f("div",I,[J.value?(g(),f("div",M,[y(d(p),{icon:d(C),size:"large"},null,8,["icon"]),R,A])):k("",!0)]))]})),_:1})])),_:1}))}}))}}}));
